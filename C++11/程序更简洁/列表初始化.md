# 统一的初始化

列表初始化统一了初始化方法，它可以用于任何类型对象的初始化。

```
int arr[]{ 1,2,3 };  //@ 初始化数组

struct A
{
    int x;
    struct B
    {
        int y;
        int z;
    }b;
};
A a{ 1,{ 2,3 } }; //@ 初始化 POD 类型

int* array = new int[3]{ 1,2,3 }; //@ 初始化动态分配的内存

class Foo
{
public:
	Foo(int,double) {}
};

Foo func()
{
	return{ 1,12.34 }; //@ 初始化返回类型
}
```

#   初始化列表的赋值方式

- 对于聚合类型的初始化将以拷贝的形式，用初始化列表中的值来初始化。
- 对于其它类型，需要使用构造函数来初始化。

## 聚合类型的定义

- 普通数组， int[10]，char[]
- 类型是一个类(struct，class，union)并且：
  - 无用户自定义的构造函数
  - 无私有或保护的非静态数据成员
  - 无基类
  - 无虚函数
  - 不能有直接初始化的非静态数据成员

### 含有私有或者受保护的非静态数据成员的类不能使用初始化列表

```
struct ST
{
	int x;
	double y;
protected:
	int z;
};

ST s{ 1,2.012,3 }; //@ 错误，类中有受保护的(私有的)非静态数据成员
```

### 含有静态成员的类，不能使用初始化列表初始化静态成员

```
struct ST
{
	int x;
	double y;
private:
	static int z;
};

ST s1{ 1,2.012}; //@ 正确
ST s2{ 1,2.012，3}; //@ 错误，静态成员不能通过初始化列表初始化，需要遵守静态成员的初始化方式
```

### 含有虚函数的类，不能使用初始化列表初始化

```
struct ST
{
	int x;
	double y;	
	virtual void func() {};
};

ST s{ 1,2.012}; //@ 错误，类中含有虚函数
```



















