声明可变参数模板时需要在 class 或 typename 关键字前面加上 ...：

- 声明一个参数包，这个参数包中可以包含 0 个到任意个模板参数。
- 在模板定义的右边，可以将参数包展开成一个一个独立的参数。

# 可变参数模板函数

```
template <typename ...T>
void func(T ...args)
{
	std::cout << sizeof...(args) << std::endl; //@ 不要写成 sizeof(...(args))
}

int main()
{
	func();  //@ 0
	func(1);  //@ 1
	func(2, "hello", 3.14);  //@ 3

	return 0;
}
```

参数包展开的两种方法：

- 递归模板函数来将参数包展开。
- 通过逗号表达式和初始化列表方式展开。

## 递归函数方式展开参数包

```
//@ 递归终止函数
void print()
{
	std::cout << "----- ending -----" << std::endl;
}

//@ 参数包展开过程中递归调用自己，直到参数为空时调用非模板的递归终止函数
template <typename T,typename ...Args>
void print(T head, Args ... rest)
{
	std::cout << "parameter:" << head << std::endl;
	print(rest...);
}
int main()
{
	print(1,2,3,4,5,6); 
	print(2, "hello", 3.14);

	return 0;
}
```

还可以采用 type_traits 来实现：

```
typename  std::enable_if<I == std::tuple_size<Tuple>::value>::type  printTP(Tuple t)
{
	std::cout << "----- ending -----" << std::endl;
}

template <std::size_t I = 0, typename Tuple>
typename  std::enable_if<I < std::tuple_size<Tuple>::value>::type  printTP(Tuple t)
{
	//@ 通过递增索引值，获取当前值
	std::cout << std::get<I>(t) << std::endl;
	printTP<I + 1>(t);
}


template <typename ...Args>
void print(Args... args)
{
	//@ 转换成 std::tuple
	printTP(std::make_tuple(args...));
}
```

## 逗号表达式和初始化列表方式展开参数包

递归函数方式展开参数的方法比较直观，但是也必须定义一个同名的终止函数，采用逗号表达式和初始化列表则不需要定义终止函数：

```
void printArg(T t)
{
	std::cout << t << std::endl;
}

template <class ...Args>
void expand(Args... args)
{
	//@ printArg(args),0) 先执行 printArg(args) 再返回 0
	//@ 依次展开 printArg(args1),0)，printArg(args2),0)，printArg(args3),0)...
	//@ 最终创建元素都为0 的 arr[sizeof(args)]
	int arr[] = { (printArg(args),0)... };

	std::cout << "-------------------------------------" << std::endl;
	std::cout << sizeof(arr)/sizeof(int) << std::endl;
}
```

使用初始化列表代替数组：

```
template <class ...Args>
void expand(Args... args)
{
	std::initializer_list<int>{ (printArg(args),0)... };
}
```

使用 lambda 表达式进一步改进：

```
template <class ...Args>
void expand(Args... args)
{
	std::initializer_list<int>{([&] {std::cout << args << std::endl; }(),0)...};
}
```

# 可变参数模板类



